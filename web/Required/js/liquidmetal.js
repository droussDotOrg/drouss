(function(global){var SCORE_NO_MATCH=0.0;var SCORE_MATCH=1.0;var SCORE_TRAILING=0.8;var SCORE_TRAILING_BUT_STARTED=0.9;var SCORE_BUFFER=0.85;var WORD_SEPARATORS=" \t_-";var LiquidMetal={lastScore:null,lastScoreArray:null,score:function(string,abbrev){if(abbrev.length===0)return SCORE_TRAILING;if(abbrev.length>string.length)return SCORE_NO_MATCH;var allScores=[];var search=string.toLowerCase();abbrev=abbrev.toLowerCase();this._scoreAll(string,search,abbrev,-1,0,[],allScores);if(allScores.length==0)return 0;var maxScore=0.0,maxArray=[];for(var i=0;i<allScores.length;i++){var scores=allScores[i];var scoreSum=0.0;for(var j=0;j<string.length;j++){scoreSum+=scores[j];}if(scoreSum>maxScore){maxScore=scoreSum;maxArray=scores;}}maxScore/=string.length;this.lastScore=maxScore;this.lastScoreArray=maxArray;return maxScore;},_scoreAll:function(string,search,abbrev,searchIndex,abbrIndex,scores,allScores){if(abbrIndex==abbrev.length){var started=(search.charAt(0)==abbrev.charAt(0));var trailScore=started?SCORE_TRAILING_BUT_STARTED:SCORE_TRAILING;fillArray(scores,trailScore,scores.length,string.length);allScores.push(scores.slice(0));return;}var c=abbrev.charAt(abbrIndex);abbrIndex++;var index=search.indexOf(c,searchIndex);if(index==-1)return;var scoreIndex=searchIndex;while((index=search.indexOf(c,searchIndex+1))!=-1){if(isNewWord(string,index)){scores[index-1]=1;fillArray(scores,SCORE_BUFFER,scoreIndex+1,index-1);}else if(isUpperCase(string,index)){fillArray(scores,SCORE_BUFFER,scoreIndex+1,index);}else{fillArray(scores,SCORE_NO_MATCH,scoreIndex+1,index);}scores[index]=SCORE_MATCH;searchIndex=index;this._scoreAll(string,search,abbrev,searchIndex,abbrIndex,scores,allScores);}}};function isUpperCase(string,index){var c=string.charAt(index);return("A"<=c&&c<="Z");}function isNewWord(string,index){var c=string.charAt(index-1);return(WORD_SEPARATORS.indexOf(c)!=-1);}function fillArray(array,value,from,to){for(var i=from;i<to;i++){array[i]=value;}return array;}if(typeof define==='function'&&define.amd){define(function(){return LiquidMetal;});}else if(typeof module!=='undefined'&&module.exports){module.exports=LiquidMetal;}else{global.LiquidMetal=LiquidMetal;}})(typeof window!=='undefined'?window:this);